import matplotlib as mpl
mpl.use('Agg')
import matplotlib.pyplot as plt

x = [1024,2048,3072,4096,5120,6144,7168,8192,9216,10240,11264,12288,13312,14336,15360,16384,17408,18432,19456,20480,22528,24576,26624,28672,30720,32768,34816,36864,38912,40960,43008,45056,47104,49152,51200,61440,71680,81920,92160,102400,204800,307200,409600,512000,614400,716800,819200,921600,1024000,1126400,2174976,3223552,4272128,5320704,6369280,7417856,8466432,9515008,10563584,11612160,12660736,13709312,14757888,15806464,16855040,18952192,21049344,23146496,25243648,27340800,29437952,31535104,33632256,37826560,42020864,46215168,50409472,54603776,58798080,62992384,67186688]

host_to_device = [583.2,778.0,1225.5,1563.7,1989.9,2312.0,2555.2,2718.3,2893.5,3129.7,3309.4,3453.0,3567.4,3684.2,3784.2,3877.2,3959.8,4034.3,4127.6,4183.1,4301.7,4416.4,4511.4,4582.4,4677.9,4752.4,4805.5,4857.3,4866.4,4969.8,5024.1,5059.2,5088.5,5113.9,5182.1,5305.3,5414.7,5491.2,5557.2,5607.6,5859.4,5945.7,5993.5,6020.9,6039.9,6055.7,6064.8,6072.2,6047.1,6058.2,6092.8,6107.5,6114.3,6118.6,6121.3,6123.1,6123.9,6125.8,6126.6,6128.0,6127.9,6128.8,6129.5,6129.3,6129.8,6130.4,6130.8,6131.6,6131.5,6132.6,6131.4,6130.5,6130.9,6131.5,6131.7,6132.1,6133.2,6133.9,6134.3,6134.3,6134.3]

device_to_host = [536.3,1026.6,1613.9,1914.8,2574.6,3093.5,3311.9,3512.7,3746.0,3905.3,4081.6,4177.3,4312.2,4421.9,4420.1,4597.7,4685.2,4770.2,4778.7,4858.5,5013.5,5073.4,5300.1,5360.5,5426.9,5460.0,5496.1,5591.7,5589.6,5682.6,5711.7,5660.8,5779.6,5810.8,5833.1,5944.3,5951.6,6085.4,6136.7,6176.1,6362.2,6368.5,6410.3,6450.7,6467.4,6480.9,6489.8,6498.2,6467.6,6475.1,6484.7,6508.1,6518.3,6537.2,6540.7,6542.8,6545.2,6546.5,6548.0,6548.1,6549.5,6550.4,6551.0,6550.6,6551.8,6552.6,6553.0,6553.6,6554.0,6554.4,6554.8,6554.8,6555.1,6552.8,6553.9,6554.3,6554.6,6554.6,6555.1,6555.2,6555.9]

device_to_device = [505.1,993.9,1462.9,2372.4,3398.6,3687.3,4231.1,4111.5,4744.8,5605.9,6323.6,6920.7,6595.5,5897.4,6241.3,6982.3,8167.4,8626.0,8543.2,7928.5,8422.1,10044.2,10132.2,10008.6,10766.6,11787.6,11808.8,11027.8,12364.6,13228.9,12018.1,12225.5,13719.2,14469.0,12748.3,14684.0,12190.7,12493.1,13459.8,14271.0,12820.0,13655.9,14206.8,14713.4,14765.1,14903.2,15058.7,15180.9,15301.8,20020.2,20577.9,20752.3,20932.2,20991.6,20987.5,21044.2,21011.7,21097.5,21123.6,21138.4,21128.5,21112.9,21134.1,21097.1,21167.5,21168.5,21174.3,21121.5,21165.5,21186.5,21187.6,21196.6,21197.4,21159.5,21219.3,21204.7,21225.1,21185.8,21197.3,21229.7,21166.1]

fig = plt.figure(figsize=(10, 8))

plt.title("Transfer size (Bytes) Vs Bandwidth (MB/s)")
plt.grid(True)
plt.xlabel("Size (Bytes)")
plt.ylabel("Bandwidth(MB/s)")
plt.plot(x, host_to_device, 'x-', label='host-to-device')
plt.plot(x, device_to_host, 'o-', label='device-to-host')
plt.plot(x, device_to_device, '^-', label='device-to-device')
plt.legend(loc='lower right')
plt.savefig("graph-bandwidthTest.png", dpi=800)

